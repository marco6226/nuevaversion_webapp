<p-toast key="diagnostico"></p-toast>
<form [formGroup]="diagnosticoForm">
    <div class="">
        <div class="row g-2 mb-3 text-center">
            <h5 class="title-header mb-2">Diagnóstico</h5>
        </div>
        <!-- div -->
        <!-- <div class="row" style="margin: 10px">
            <div class="col" style="width: 50px; height: 50px; background: blue; margin: 10px"></div>
            <div class="col" style="width: 50px; height: 50px; background: blue; margin: 10px"></div>
            <div class="col" style="width: 50px; height: 50px; background: blue; margin: 10px"></div>
        </div>
        <div class="row" style="margin: 10px">
            <div class="col" style="width: 50px; height: 50px; background: red; margin: 10px"></div>
            <div class="col" style="width: 50px; height: 50px; background: red; margin: 10px"></div>
            <div class="col" style="width: 50px; height: 50px; background: red; margin: 10px"></div>
        </div> -->

        <div class="row">
            <div class="col">
                <div class="input-field">
                    <label class="active">Código CIE 10</label>
                    <s-cieSelector [readOnly]="esConsulta" id="ccide-input" formControlName="codigoCie10" 
                    (dateChange)="test($event)">
                    </s-cieSelector>
                </div>
                <small *ngIf="codigo?.errors?.required && codigo?.touched" id="username2-help" class="p-invalid">Obligatorio</small>
            </div>
            <br>
            
            <div class="col">
                <div class="input-field">
                    <div>
                        <label for="" class="active">Origen</label>
                    </div>
                    <div>
                        <p-dropdown [readonly]="esConsulta" [options]="origenList" formControlName="origen" class="select-material" 
                        styleClass="select-material">
                        </p-dropdown>
                    </div>
                </div>
                <small *ngIf="origen?.errors?.required && origen?.touched" id="username2-help" class="p-invalid">Obligatorio</small>
            </div>
        </div>
        <!-- div -->
        <div class="row">
            
            <div class="col">
                <div class="input-field">
                    <div>
                        <label for="" class="active">Sistema Afectado</label>
                    </div>
                    <div>
                        <input [readOnly]="esConsulta" pInputText type="text" [value]="cieTipo">
                    </div>
                </div>
                <small *ngIf="sistemaAfec?.errors?.required && sistemaAfec?.touched" id="username2-help" 
                class="p-invalid">Obligatorio</small>
            </div>
            <div class="col">
                <div class="input-field">
                    <div>
                        <label for="" class="active">Fecha Diagnóstico</label>
                    </div>
                    <div>
                        <p-calendar [disabled]="esConsulta" [monthNavigator]="true" [touchUI]="true" [yearNavigator]="true" 
                        [yearRange]="yearRange" formControlName="fechaDiagnostico"  dateFormat="dd/mm/yy" 
                        inputStyleClass="form-material">
                        </p-calendar>
                    </div>
                </div>
                <small *ngIf="fechaDiagnostico?.errors?.required && fechaDiagnostico?.touched" id="username2-help" 
                class="p-invalid">Obligatorio</small>
            </div>
        </div>
        <!-- div -->
        <div class="row">
            <div class="col">
                <div class="input-field">
                    <div>
                        <label for="" class="active">Diagnóstico</label>
                    </div>
                    <div>
                        <textarea [readOnly]="esConsulta" rows="4" cols="50" class="textarea-material" pInputTextarea 
                        formControlName="diagnostico"></textarea>
                    </div>
                </div>
                <small *ngIf="diagnostico?.errors?.required && diagnostico?.touched" id="username2-help" class="p-invalid">Obligatorio</small>
            </div>
            <div class="col">
                <div class="input-field">
                    <div>
                        <label for="" class="active">Detalles del diagnóstico</label>
                    </div>
                    <div>
                        <textarea [readOnly]="esConsulta" rows="4" cols="50" class="textarea-material" pInputTextarea formControlName="detalle"></textarea>
                    </div>
                </div>
                <small *ngIf="detalle?.errors?.required && detalle?.touched" id="username2-help" class="p-invalid">Obligatorio</small>
            </div>
        </div>

        <div class="col-12 p-d-flex p-jc-center p-py-2">
            
            <button *sTienePermiso="'SCM_CREATE_CASE_DIAG'" [disabled]="esConsulta" pButton type="button" 
            [label]="(diagSelect) ? 'Guardar' : 'Crear'" icon="bi bi-save" style="margin-right: .5rem;" (click)="onSubmit()"></button>
            <button pButton type="button" [label]="(diagSelect) ? 'Cancelar' : 'Cerrar'" icon="pi pi-times" 
            class="p-button-danger" (click)="close()"></button>
        </div>
    </div>
</form>