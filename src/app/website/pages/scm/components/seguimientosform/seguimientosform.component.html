<p-toast key="segForm"></p-toast>
<div class="">
    <div class="">
        <form [formGroup]="seguimiento">



            <div class="row">
                <div class="col">
                    <div class="input-field" style="height: 30px;">
                        <label for="" class="active">Fecha de seguimiento</label>
                        <p-calendar [touchUI]="true" [monthNavigator]="true" showButtonBar="true"
                            [yearNavigator]="true" yearRange="2010:2030" formControlName="fechaSeg" dateFormat="dd/mm/yy"
                            placeholder="dd/MM/yyyy" appendTo="body" required>
                        </p-calendar>
                        <!-- <p-calendar dateFormat="dd/mm/yy" [monthNavigator]="true" formControlName="fechaproximo"
                        appendTo="body"></p-calendar> -->
                    </div>
                </div>                

                <div class="col">
                    <div class="input-field">
                        <label for="" class="active">Seguimiento</label>
                        <textarea formControlName="seguimiento" class="textarea-material" pInputTextarea
                            rows="2" required></textarea>
                    </div>

                </div>
                <div class="col">
                    <div class="input-field">
                        <label for="" class="active">Tarea</label>
                        <textarea formControlName="tarea" class="textarea-material" pInputTextarea rows="2"></textarea>
                    </div>

                </div>
            </div>                

            <div class="row">
                
                <div class="col">
                    <div class="input-field" style="height: 30px;">
                        <label for="" class="active">Responsable Empresa</label>
                        <p-autoComplete appendTo="body" styleClass="form-material-autocomplete" #autocomplete placeholder="Digite"
                            [style]="{'width':'100%'}" (onSelect)="responsable = $event" [suggestions]="empleadosList"
                            (completeMethod)="buscarEmpleado($event)" field="numeroIdentificacion"
                            formControlName="responsable" *ngIf="empleado?.id == null" required>
                            <ng-template let-empleado pTemplate="item" appendTo="body">
                                <div style="margin-left:20px">
                                    <label>{{empleado?.primerNombre}} {{empleado?.primerApellido}}</label>
                                    <br/> {{empleado?.numeroIdentificacion}}
                                    <br/> {{empleado?.usuarioBasic.email}}
                                </div>
                            </ng-template>
                        </p-autoComplete>
                    </div>

                </div>
                <div class="col">
                    <div class="input-field">
                        <label for="" class="active">Responsable Externo </label>
                        <input formControlName="responsableExterno" style="height: 30px;">
                    </div>
                </div>
                <div class="col">
                    <div class="input-field">
                        <label for="" class="active">Resultado</label>
                        <input formControlName="resultado" style="height: 30px;">
                    </div>
                </div>
            </div>
            <div class="row">
                &nbsp;
            </div>
            <div class="row">
                <div class="col">
                    <div class="input-field">
                        <label for="" class="active">Fecha pr√≥ximo seguimiento</label>
                        <p-calendar dateFormat="dd/mm/yy" [monthNavigator]="true" formControlName="proxfechaSeg"
                        placeholder="dd/MM/yyyy" appendTo="body" [minDate]="fechaActual" [maxDate]="fechaProximaDate" required></p-calendar>
                    </div>
                </div>
            </div>


        </form>
    </div>

    <div class="col p-pt-3">
        <button *sTienePermiso="'SCM_CREATE_CASE_SEG'" 
            pButton type="button"
            [label]="(seguiSelect) ? 'Actualizar' : 'Guardar'" 
            icon="bi bi-save" 
            class="p-button-raised p-button-primary margin-right"
            (click)="onSubmit()"
            [disabled]="!seguimiento.valid"
            >

        </button>
    </div>
</div>