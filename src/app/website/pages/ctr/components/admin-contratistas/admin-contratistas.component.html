<!-- <p-toast key="admCtr"></p-toast> -->
<div class="shadow">
  <p-panel header="Contratistas vinculados">

    <p-table #dt [value]="empresasList" autoLayout="true" *ngIf="empresasList" >
      <ng-template pTemplate="header">
        <tr>
          <th rowspan="2" style="width: 4em;">Vinculado</th>
          <th>Nombre</th>
          <th>Raz√≥n social</th>
          <th>Nit</th>
          <th>ARL</th>
        </tr>
        <tr>
          <td>
            <input placeholder="Buscar" pInputText type="text" (input)="dt.filter($event.target.value, 'nombreComercial', 'contains')">
          </td>
          <td>
            <input placeholder="Buscar" pInputText type="text" (input)="dt.filter($event.target.value, 'razonSocial', 'contains')">
          </td>
          <td>
            <input placeholder="Buscar" pInputText type="text" (input)="dt.filter($event.target.value, 'nit', 'contains')">
          </td>
          <td>
            <input placeholder="Buscar" pInputText type="text" (input)="dt.filter($event.target.value, 'arl.nombre', 'contains')">
          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-rowData>
        <tr>
          <td>
            <p-toggleButton (click)="actualizarVinculacion(rowData)" [(ngModel)]="rowData.vinculado" onLabel="SI" offLabel="NO"></p-toggleButton>
          </td>
          <td>
            {{rowData.nombreComercial}}
          </td>
          <td>
            {{rowData.razonSocial}}
          </td>
          <td>
            {{rowData.nit}}
          </td>
          <td>
            {{rowData.arl?.nombre}}
          </td>
        </tr>
      </ng-template>
    </p-table>
  </p-panel>
</div>