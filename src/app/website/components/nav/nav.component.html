<p-toast position="top-center"></p-toast>
<div class="contenedor">
    <div class="col1">
        <img src="../../../../assets/svg/logoSigessRedondo2.svg" alt=""  (click)="dashBoard()" type="button">
    </div>
    <div class="col2">
        <img src="../../../../assets/svg/Sigess5.svg" alt=""  (click)="dashBoard()" type="button">
    </div>
    <div class="col3">        
        <img class="logo-Empresa" *ngIf="empresaSelect?.logo" [src]="empresaSelect?.logo" alt="">          
        <button type="button" class="button-round button-white" mat-raised-button color="primary" (click)="showDialog()">  
            <mat-icon type="button"  class="logo-Empresa" *ngIf="!empresaSelect?.logo" fontIcon="apartment" style="color: #052f6e;"></mat-icon>
            <label type="button"  for="">{{empresaSelect?.nombreComercial}}</label>           
        </button>       
    </div>
    <div class="col4">
        <mat-icon matBadge="15"  matBadgeColor="warn" aria-hidden="false" fontIcon="notifications"></mat-icon>        
    </div>
    <div class="col5" (click)="showDialogSideBar()" type="button">
        <mat-icon *ngIf="!usuario?.icon" aria-hidden="false" fontIcon="account_circle"></mat-icon>      
        <img *ngIf="usuario?.icon" [src]="usuario.icon"/>
        <label type="button" class="text-color-white" for="">{{usuario?.email}}</label>  
    </div>
</div>

<p-dialog  header="Lista de Empresas" position="top" draggable="false" keepInViewport="false" modal="true" [(visible)]="display" [style]="{width: '50vw'}">
    <app-empresa-list [empresasList]="empresasItems" (changeEmpresa)="confirmEmpresa($event)"></app-empresa-list>
    <!-- <ng-template pTemplate="footer"> -->
        <!-- <p-button icon="pi pi-check" (click)="test()" label="Aceptar" styleClass="p-button-text"></p-button> -->
    <!-- </ng-template> -->
</p-dialog>

<p-sidebar [(visible)]="displaySideBar" position="right" autoZIndex="true" baseZIndex="0">
    <ng-template pTemplate="content" >
        <div>
            <div>
                <!-- <mat-icon *ngIf="!usuario?.icon" aria-hidden="false" fontIcon="account_circle"></mat-icon>      
                <img *ngIf="usuario?.icon" [src]="usuario.icon"/> -->

                <div>
                    <i *ngIf="!usuario.avatar" class="fa fa-user-circle" style="font-size: 128px;color:#3ba2dc;"
                        aria-hidden="true"></i>
                    <img *ngIf="usuario.avatar" [src]="usuario.avatar" style="border-radius: 50%; height: 128px; width: 128px; margin-right: -3px;" #imgAvatar />
                    <div class="img-select" (click)="abrirDlg()">
                        <div>
                            <i class="bi bi-camera" style="font-size: 32px; color:#aaa;" aria-hidden="true"></i>
                        </div>
                    </div>
                </div>

                <label for="">{{usuario?.perfilNombre}}</label>  
                <label for="">{{usuario?.email}}</label>  
            </div>
            <br>
            <div>
                <button class="p-button-raised p-button-primary margin-right" 
                        pButton type="button" 
                        icon="bi bi-key" 
                        label="Cambiar Contrase침a"
                        (click)="abrirCambioPasswd()"></button>
            </div>            
        </div>        
    </ng-template>
    <ng-template pTemplate="footer">
        <div>
            
            
            <div>
                <!-- <button type="button" pButton icon="fa fa-check" (click)="logout()" label="Cerar Sesi칩n"></button> -->
                <button pButton type="button" 
                        icon="bi bi-box-arrow-left" 
                        label="Cerrar Sesi칩n" 
                        class="p-button-raised p-button-danger margin-right margin-left"
                        (click)="logout()" ></button>
            </div>
        </div>
    </ng-template>
</p-sidebar>

<p-dialog [(visible)]="visibleDlg" modal="true">
    <p-header>
        <button pButton type="button" 
            icon="bi bi-plus"
            class="p-button-raised p-button-primary margin-right margin-left"
            label="Explorar" 
            (click)="inputFile.click()"></button>

        <button pButton type="button" 
            icon="bi bi-upload"
            class="p-button-raised p-button-success margin-right margin-left"
            label="Subir" 
            (click)="aceptarImg()"></button>

        <input type="file" #inputFile style="visibility: hidden;width: 0px;height: 0px;"
            (change)="fileChangeEvent($event)" />
    </p-header>
    <div style="width: 600px;height: 600px">
        <div class="previsual-crop">
            <img [src]="croppedImage" />
        </div>
        <image-cropper *ngIf="imageChangedEvent" [imageChangedEvent]="imageChangedEvent" [maintainAspectRatio]="true"
            [aspectRatio]="4 / 4" height="480" [resizeToWidth]="128" format="jpg" (imageCropped)="imageCropped($event)">
        </image-cropper>
    </div>
</p-dialog>

<p-dialog [(visible)]="visbleChangePasw" modal="true">    
    <p-header>
        Cambiar Contrase침a
    </p-header>
    <div style="width: 300px">
        <app-cambio-passwd></app-cambio-passwd>
    </div>
</p-dialog>